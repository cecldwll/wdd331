@use "../utility-styles/mixins" as mixins;
@use "../global-styles/theme" as theme;

// --------------------------
// Sections with glitchy borders
// --------------------------
section {
  background-color: theme.color(background); // solid black
  position: relative;
  border-radius: 1rem;
  margin: 2rem auto;
  padding: 2rem;
  max-width: 85%;
  z-index: 0;
  overflow: hidden;

  // Base neon border
  border: 2px solid rgba(255, 255, 255, 0.05);
  box-shadow: 0 0 5px rgba(255, 255, 255, 0.1);

  // Glitchy pseudo-elements
  &::before,
  &::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: 2;
  }

  // Top/left glitch border
  &::before {
    border: 2px solid rgba(255, 255, 255, 0.05);
    transform: translate(0, 0);
    animation: glitchBorder1 8s infinite steps(1, end);
  }

  // Bottom/right glitch border
  &::after {
    border: 2px solid rgba(255, 255, 255, 0.05);
    transform: translate(0, 0);
    animation: glitchBorder2 10s infinite steps(1, end);
  }

  // --------------------------
  // Border glitch keyframes
  // --------------------------
  @keyframes glitchBorder1 {
    0%,
    60%,
    65%,
    100% {
      transform: translate(0, 0);
      opacity: 0.7;
      border-color: rgba(255, 255, 255, 0.05);
    }
    62%,
    63%,
    64% {
      transform: translate(-2px, 1px);
      opacity: 0.8;
      border-color: theme.color(variant-1);
    }
    63%,
    64%,
    65% {
      transform: translate(-1px, 0.5px);
      opacity: 0.85;
      border-color: theme.color(variant-4);
    }
    80%,
    81%,
    82% {
      transform: translate(1px, -1px);
      opacity: 0.8;
      border-color: theme.color(variant-1);
    }
    81%,
    82%,
    83% {
      transform: translate(0.5px, 0.5px);
      opacity: 0.85;
      border-color: theme.color(variant-4);
    }
  }

  @keyframes glitchBorder2 {
    0%,
    60%,
    70%,
    100% {
      transform: translate(0, 0);
      opacity: 0.6;
      border-color: rgba(255, 255, 255, 0.05);
    }
    62%,
    63%,
    64% {
      transform: translate(2px, -1px);
      opacity: 0.75;
      border-color: theme.color(variant-1);
    }
    63%,
    64%,
    65% {
      transform: translate(1px, 0.5px);
      opacity: 0.8;
      border-color: theme.color(variant-4);
    }
    80%,
    81%,
    82% {
      transform: translate(-1px, 1px);
      opacity: 0.75;
      border-color: theme.color(variant-1);
    }
    81%,
    82%,
    83% {
      transform: translate(-0.5px, -0.5px);
      opacity: 0.8;
      border-color: theme.color(variant-4);
    }
  }
}

// --------------------------
// Headings (h2) inside sections
// --------------------------
section h2 {
  @include mixins.glitch-text(theme.color(variant-1), theme.color(variant-4));
  display: inline-block;
  margin-bottom: 2rem;
}

// --------------------------
// Headings (h3), {TL;DR, Steps to Contribute, Source Files}
// --------------------------
h3 {
  color: var(--color-variant-3);
  margin-bottom: 1.5rem;
}

// --------------------------
// Paragraphs and lists spacing
// --------------------------
section p,
section li {
  margin-bottom: 1.25rem;
  line-height: 1.6;
}

aside li {
  line-height: 1.6;
}

// --------------------------
// Links inside sections
// --------------------------
section a {
  color: theme.color(link);
  text-decoration: none;
  transition: color 0.25s, text-shadow 0.25s;

  &:hover {
    color: theme.color(variant-3);
    text-shadow: 0 0 6px theme.color(variant-4);
  }
}
